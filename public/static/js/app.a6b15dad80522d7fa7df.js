webpackJsonp([1],{"+BTi":function(e,t){},"+Rdb":function(e,t){},"+bdP":function(e,t){},Dte2:function(e,t){},FjhO:function(e,t){},GXEp:function(e,t){},NHnr:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});r("isgN"),r("+BTi");var a=r("tLa+"),n=r.n(a),s=(r("Yq4J"),r("qubY")),o=r.n(s),i=(r("Dte2"),r("q4le")),l=r.n(i),u=(r("isE6"),r("LR6y")),c=r.n(u),d=(r("+Rdb"),r("Mezo")),m=r.n(d),p=(r("qunJ"),r("vqwl")),f=r.n(p),g=(r("X+ky"),r("HJMx")),h=r.n(g),v=(r("d7TW"),r("ajQY")),_=r.n(v),b=(r("cDSy"),r("e0Bm")),y=r.n(b),F=(r("GXEp"),r("mtrD")),w=r.n(F),k=r("/5sW"),x={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var $=r("VU/8")({name:"App"},x,!1,function(e){r("rU7j")},null,null).exports,C=r("/ocq"),R={render:function(){var e=this.$createElement;return(this._self._c||e)("h1",[this._v("404 Not Found!")])},staticRenderFns:[]},E=r("VU/8")(null,R,!1,null,null,null).exports,L=(r("cwe7"),r("2X9z")),D=r.n(L),q=r("//Fk"),H=r.n(q),P=r("mtWM"),U=r.n(P);function O(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new H.a(function(t,r){U()(e).then(function(e){200===e.status&&(3e3!==e.data.status||e.data.success?t(e.data):Q.push({name:"loginRegistry",params:{state:"login"}}))}).catch(function(e){D()({showClose:!0,message:"请求错误: "+e,type:"error"})})})}var T={name:"Index",data:function(){return{name:"",menuList:[{id:1,text:"首页",icon:"icon-homepage",active:!0}]}},methods:{handleLoginOut:function(){document.cookie='userId = ""; expires = -1',O({method:"get",url:"/api/loginOut"})}},created:function(){var e=this;O({method:"get",url:"/api/getInfor"}).then(function(t){1e3===t.status&&t.success&&(e.name=t.data.name)})}},V={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"layout"},[r("div",{staticClass:"layout-header"},[r("div",{staticClass:"layout-header__logo"}),e._v(" "),r("div",{staticClass:"layout-header__user"},[r("span",[e._v("Hello "+e._s(e.name))]),r("a",{staticClass:"layout-header__loginOut",attrs:{href:"javascript:;"},on:{click:e.handleLoginOut}},[e._v("退出登录")])])]),e._v(" "),r("div",{staticClass:"layout-left"},[r("div",{staticClass:"layout-left__logo"}),e._v(" "),r("ul",{staticClass:"layout-left__content"},e._l(e.menuList,function(t){return r("li",{key:t.id,staticClass:"layout-left__item",class:{active:t.active}},[r("i",{staticClass:"iconfont",class:t.icon}),e._v(" "),r("span",[e._v(e._s(t.text))])])}))]),e._v(" "),r("div",{staticClass:"layout-content"},[r("router-view")],1)])},staticRenderFns:[]};var j=r("VU/8")(T,V,!1,function(e){r("vHEl")},null,null).exports,M={name:"LoginForm",data:function(){return{loginForm:{account:"",password:""},loginRules:{account:[{validator:function(e,t,r){""===t?r(new Error("请输入账号")):r()},trigger:"blur"}],password:[{validator:function(e,t,r){""===t?r(new Error("请输入密码")):r()},trigger:"blur"}]}}},methods:{handleLogin:function(){var e=this,t=this.$refs.loginForm,r=this.loginForm,a=r.account,n=r.password;t.validate(function(r){if(!r)return!1;O({method:"post",url:"/api/login",data:{account:a,password:n}}).then(function(r){1e3===r.status&&r.success?e.$router.push({name:"index"}):(t.clearValidate(),D()({showClose:!0,message:r.msg,type:"error"}))})})},goRegistry:function(){this.$router.replace({name:"loginRegistry",params:{state:"registry"}})}}},J={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{"label-width":"80px",model:e.loginForm,rules:e.loginRules}},[r("h1",{staticClass:"login-form__title"},[e._v("账号登录")]),e._v(" "),r("el-form-item",{attrs:{label:"用户名",prop:"account"}},[r("el-input",{nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.handleLogin(t):null}},model:{value:e.loginForm.account,callback:function(t){e.$set(e.loginForm,"account",t)},expression:"loginForm.account"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"密码",prop:"password"}},[r("el-input",{attrs:{type:"password"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.handleLogin(t):null}},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}})],1),e._v(" "),r("el-row",[r("el-button",{attrs:{type:"primary"},on:{click:e.handleLogin}},[e._v("登录")]),e._v(" "),r("el-button",{on:{click:e.goRegistry}},[e._v("注册")])],1)],1)},staticRenderFns:[]},z={data:function(){var e=this;return{registryForm:{account:"",password:"",checkPass:""},registryRules:{account:[{validator:function(e,t,r){""===t?r(new Error("请输入账号")):O({method:"get",url:"/api/checkAccount",params:{account:t}}).then(function(e){1e3===e.status&&e.success?r():r(new Error(e.msg))})},trigger:"blur"}],password:[{validator:function(t,r,a){""===r?a(new Error("请输入密码")):(""!==e.registryForm.checkPass&&e.$refs.registryForm.validateField("checkPass"),a())},trigger:"blur"}],checkPass:[{validator:function(t,r,a){""===r?a(new Error("请再次输入密码")):r!==e.registryForm.password?a(new Error("两次输入密码不一致!")):a()},trigger:"blur"}]}}},methods:{handleRegistry:function(){var e=this,t=this.$refs.registryForm,r=this.registryForm,a=r.account,n=r.password;t.validate(function(t){if(!t)return!1;O({method:"post",url:"/api/registry",data:{account:a,password:n}}).then(function(t){1e3===t.status&&t.success?e.$router.push({name:"index"}):D()({showClose:!0,message:t.msg,type:"error"})})})},goLogin:function(){this.$router.replace({name:"loginRegistry",params:{state:"login"}})}}},A={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-form",{ref:"registryForm",staticClass:"login-form",attrs:{"label-width":"80px",model:e.registryForm,rules:e.registryRules,"status-icon":""}},[r("h1",{staticClass:"login-form__title"},[e._v("注册账号")]),e._v(" "),r("el-form-item",{attrs:{label:"用户名",prop:"account"}},[r("el-input",{attrs:{type:"text"},model:{value:e.registryForm.account,callback:function(t){e.$set(e.registryForm,"account",t)},expression:"registryForm.account"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"密码",prop:"password"}},[r("el-input",{attrs:{type:"password"},model:{value:e.registryForm.password,callback:function(t){e.$set(e.registryForm,"password",t)},expression:"registryForm.password"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"确认密码",prop:"checkPass"}},[r("el-input",{attrs:{type:"password"},model:{value:e.registryForm.checkPass,callback:function(t){e.$set(e.registryForm,"checkPass",t)},expression:"registryForm.checkPass"}})],1),e._v(" "),r("el-row",[r("el-button",{attrs:{type:"primary"},on:{click:e.handleRegistry}},[e._v("立即注册")]),e._v(" "),r("el-button",{on:{click:e.goLogin}},[e._v("返回登录")])],1)],1)},staticRenderFns:[]},N={name:"Login",computed:{state:function(){return this.$route.params.state}},components:{LoginForm:r("VU/8")(M,J,!1,null,null,null).exports,RegistryForm:r("VU/8")(z,A,!1,null,null,null).exports}},S={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"login"},[t("div",{staticClass:"login-container"},["login"===this.state?t("login-form"):t("registry-form")],1)])},staticRenderFns:[]};var X=r("VU/8")(N,S,!1,function(e){r("FjhO")},null,null).exports,B=r("Dd8w"),I=r.n(B),W={name:"Home",data:function(){return{visible:!1,tableHeight:null,tableData:[],addForm:{name:"",price:null,sale_method:"",sale_date:"",series:"",type:"METALBUILD"},rules:{name:[{required:!0,message:"请输入名称",trigger:"blur"}],price:[{required:!0,message:"请输入价格",trigger:"blur"},{type:"number",message:"请输入数字",trigger:"blur"}],sale_method:[{required:!0,message:"请输入发售方式",trigger:"blur"}],sale_date:[{required:!0,message:"请输入发售日期",trigger:"blur"}],series:[{required:!0,message:"请输入系列",trigger:"blur"}]}}},methods:{initData:function(){var e=this;O({method:"get",url:"/api/getList"}).then(function(t){1e3===t.status&&t.success&&(e.tableData=t.data)})},setTableHeight:function(){var e=document.body.clientHeight;this.tableHeight=e-50-20-42},handleDialogClose:function(){this.$refs.addForm.resetFields()},handleAddFormSubmit:function(){var e=this;this.$refs.addForm.validate(function(t){if(!t)return!1;O({method:"post",url:"/api/addList",data:I()({},e.addForm)}).then(function(t){1e3===t.status&&t.success&&(e.visible=!1,e.$refs.addForm.resetFields(),e.initData())})})}},created:function(){this.setTableHeight(),this.initData()}},Y={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"home"},[r("div",{staticClass:"home-container"},[r("el-row",{staticClass:"mb10"},[r("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"small"},on:{click:function(t){e.visible=!0}}},[e._v("添加")])],1),e._v(" "),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,height:e.tableHeight}},[r("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),r("el-table-column",{attrs:{prop:"name",label:"名称",width:"180"}}),e._v(" "),r("el-table-column",{attrs:{prop:"price",label:"价格",width:"180"}}),e._v(" "),r("el-table-column",{attrs:{prop:"sale_method",label:"发售方式",width:"180"}}),e._v(" "),r("el-table-column",{attrs:{prop:"sale_date",label:"发售日期",width:"180"}}),e._v(" "),r("el-table-column",{attrs:{prop:"series",label:"系列"}})],1)],1),e._v(" "),r("el-dialog",{attrs:{title:"添加数据",visible:e.visible,width:"500px"},on:{"update:visible":function(t){e.visible=t},close:e.handleDialogClose}},[r("el-form",{ref:"addForm",attrs:{model:e.addForm,rules:e.rules,"label-width":"80px"}},[r("el-form-item",{attrs:{prop:"name",label:"名称"}},[r("el-input",{model:{value:e.addForm.name,callback:function(t){e.$set(e.addForm,"name",t)},expression:"addForm.name"}})],1),e._v(" "),r("el-form-item",{attrs:{prop:"price",label:"价格"}},[r("el-input",{model:{value:e.addForm.price,callback:function(t){e.$set(e.addForm,"price",e._n(t))},expression:"addForm.price"}})],1),e._v(" "),r("el-form-item",{attrs:{prop:"sale_method",label:"发售方式"}},[r("el-input",{model:{value:e.addForm.sale_method,callback:function(t){e.$set(e.addForm,"sale_method",t)},expression:"addForm.sale_method"}})],1),e._v(" "),r("el-form-item",{attrs:{prop:"sale_date",label:"发售日期"}},[r("el-date-picker",{attrs:{type:"month",placeholder:"选择日期",editable:!1,"value-format":"yyyy-MM"},model:{value:e.addForm.sale_date,callback:function(t){e.$set(e.addForm,"sale_date",t)},expression:"addForm.sale_date"}})],1),e._v(" "),r("el-form-item",{attrs:{prop:"series",label:"系列"}},[r("el-input",{model:{value:e.addForm.series,callback:function(t){e.$set(e.addForm,"series",t)},expression:"addForm.series"}})],1)],1),e._v(" "),r("el-row",{attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.handleAddFormSubmit}},[e._v("确定")]),e._v(" "),r("el-button",{attrs:{size:"medium"},on:{click:function(t){e.visible=!1}}},[e._v("取消")])],1)],1)],1)},staticRenderFns:[]};var G=r("VU/8")(W,Y,!1,function(e){r("+bdP")},null,null).exports;k.default.use(C.a);var Q=new C.a({mode:"history",routes:[{path:"/",name:"index",component:j,redirect:"/home",children:[{path:"home",name:"home",component:G}]},{path:"/loginRegistry/:state",name:"loginRegistry",component:X},{path:"*",name:"404",component:E}]});k.default.use(w.a),k.default.use(y.a),k.default.use(_.a),k.default.use(h.a),k.default.use(f.a),k.default.use(m.a),k.default.use(c.a),k.default.use(l.a),k.default.use(o.a),k.default.use(n.a),k.default.config.productionTip=!1,new k.default({el:"#app",router:Q,render:function(e){return e($)}})},"X+ky":function(e,t){},Yq4J:function(e,t){},cDSy:function(e,t){},cwe7:function(e,t){},d7TW:function(e,t){},isE6:function(e,t){},isgN:function(e,t){},qunJ:function(e,t){},rU7j:function(e,t){},vHEl:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.a6b15dad80522d7fa7df.js.map