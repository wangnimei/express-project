webpackJsonp([1],{"+BTi":function(e,t){},"+Dab":function(e,t){},"+Rdb":function(e,t){},"/G+w":function(e,t){},Dte2:function(e,t){},GXEp:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});a("isgN"),a("+BTi");var r=a("tLa+"),n=a.n(r),s=(a("Yq4J"),a("qubY")),o=a.n(s),i=(a("Dte2"),a("q4le")),l=a.n(i),c=(a("isE6"),a("LR6y")),u=a.n(c),d=(a("+Rdb"),a("Mezo")),m=a.n(d),p=(a("qunJ"),a("vqwl")),f=a.n(p),g=(a("X+ky"),a("HJMx")),h=a.n(g),v=(a("d7TW"),a("ajQY")),_=a.n(v),b=(a("cDSy"),a("e0Bm")),y=a.n(b),F=(a("GXEp"),a("mtrD")),w=a.n(F),k=a("/5sW"),C={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var x=a("VU/8")({name:"App"},C,!1,function(e){a("rU7j")},null,null).exports,$=a("/ocq"),R={render:function(){var e=this.$createElement;return(this._self._c||e)("h1",[this._v("404 Not Found!")])},staticRenderFns:[]},E=a("VU/8")(null,R,!1,null,null,null).exports,L=(a("cwe7"),a("2X9z")),D=a.n(L),q=a("//Fk"),H=a.n(q),O=a("mtWM"),P=a.n(O);function U(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new H.a(function(t,a){P()(e).then(function(e){200===e.status&&(3e3!==e.data.status||e.data.success?t(e.data):Q.push({name:"loginRegistry",params:{state:"login"}}))}).catch(function(e){D()({showClose:!0,message:"请求错误: "+e,type:"error"})})})}var M={name:"Index",data:function(){return{name:"",menuList:[{id:1,text:"首页",icon:"icon-homepage",active:!0}]}},methods:{handleLoginOut:function(){document.cookie='userId = ""; expires = -1',U({method:"get",url:"/api/loginOut"})}},created:function(){var e=this;U({method:"get",url:"/api/getInfor"}).then(function(t){1e3===t.status&&t.success&&(e.name=t.data.name)})}},T={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"layout"},[a("div",{staticClass:"layout-header"},[a("div",{staticClass:"layout-header__logo"}),e._v(" "),a("div",{staticClass:"layout-header__user"},[a("span",[e._v("Hello "+e._s(e.name))]),a("a",{staticClass:"layout-header__loginOut",attrs:{href:"javascript:;"},on:{click:e.handleLoginOut}},[e._v("退出登录")])])]),e._v(" "),a("div",{staticClass:"layout-left"},[a("div",{staticClass:"layout-left__logo"}),e._v(" "),a("ul",{staticClass:"layout-left__content"},e._l(e.menuList,function(t){return a("li",{key:t.id,staticClass:"layout-left__item",class:{active:t.active}},[a("i",{staticClass:"iconfont",class:t.icon}),e._v(" "),a("span",[e._v(e._s(t.text))])])}))]),e._v(" "),a("div",{staticClass:"layout-content"},[a("router-view")],1)])},staticRenderFns:[]};var V=a("VU/8")(M,T,!1,function(e){a("vHEl")},null,null).exports,I=a("Dd8w"),J=a.n(I),S={name:"LoginForm",data:function(){return{random:parseInt(1e5*Math.random()),loginForm:{account:"",password:"",captcha:""},loginRules:{account:[{required:!0,message:"请输入账号",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],captcha:[{required:!0,message:"请输入验证码",trigger:"blur"}]}}},methods:{handleLogin:function(){var e=this,t=this.$refs.loginForm;t.validate(function(a){if(!a)return!1;U({method:"post",url:"/api/login",data:J()({},e.loginForm)}).then(function(a){1e3===a.status&&a.success?e.$router.push({name:"index"}):(t.clearValidate(),D()({showClose:!0,message:a.msg,type:"error"}))})})},goRegistry:function(){this.$router.replace({name:"loginRegistry",params:{state:"registry"}})},updateCaptcha:function(){this.random=parseInt(1e5*Math.random())}}},j={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{"label-width":"80px",model:e.loginForm,rules:e.loginRules}},[a("h1",{staticClass:"login-form__title"},[e._v("账号登录")]),e._v(" "),a("el-form-item",{attrs:{label:"用户名",prop:"account"}},[a("el-input",{nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.handleLogin(t):null}},model:{value:e.loginForm.account,callback:function(t){e.$set(e.loginForm,"account",t)},expression:"loginForm.account"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{type:"password"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.handleLogin(t):null}},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"验证码",prop:"captcha"}},[a("el-input",{staticClass:"login-form__captcha",nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.handleLogin(t):null}},model:{value:e.loginForm.captcha,callback:function(t){e.$set(e.loginForm,"captcha",e._n(t))},expression:"loginForm.captcha"}}),e._v(" "),a("img",{staticClass:"login-form__captchaPng",attrs:{src:"/api/captcha?random="+e.random,title:"点击换一张"},on:{click:e.updateCaptcha}})],1),e._v(" "),a("el-row",[a("el-button",{attrs:{type:"primary"},on:{click:e.handleLogin}},[e._v("登录")]),e._v(" "),a("el-button",{on:{click:e.goRegistry}},[e._v("注册")])],1)],1)},staticRenderFns:[]};var z={data:function(){var e=this;return{registryForm:{account:"",password:"",checkPass:""},registryRules:{account:[{validator:function(e,t,a){""===t?a(new Error("请输入账号")):U({method:"get",url:"/api/checkAccount",params:{account:t}}).then(function(e){1e3===e.status&&e.success?a():a(new Error(e.msg))})},trigger:"blur"}],password:[{validator:function(t,a,r){""===a?r(new Error("请输入密码")):(""!==e.registryForm.checkPass&&e.$refs.registryForm.validateField("checkPass"),r())},trigger:"blur"}],checkPass:[{validator:function(t,a,r){""===a?r(new Error("请再次输入密码")):a!==e.registryForm.password?r(new Error("两次输入密码不一致!")):r()},trigger:"blur"}]}}},methods:{handleRegistry:function(){var e=this,t=this.$refs.registryForm,a=this.registryForm,r=a.account,n=a.password;t.validate(function(t){if(!t)return!1;U({method:"post",url:"/api/registry",data:{account:r,password:n}}).then(function(t){1e3===t.status&&t.success?e.$router.push({name:"index"}):D()({showClose:!0,message:t.msg,type:"error"})})})},goLogin:function(){this.$router.replace({name:"loginRegistry",params:{state:"login"}})}}},A={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{ref:"registryForm",staticClass:"login-form",attrs:{"label-width":"80px",model:e.registryForm,rules:e.registryRules,"status-icon":""}},[a("h1",{staticClass:"login-form__title"},[e._v("注册账号")]),e._v(" "),a("el-form-item",{attrs:{label:"用户名",prop:"account"}},[a("el-input",{attrs:{type:"text"},model:{value:e.registryForm.account,callback:function(t){e.$set(e.registryForm,"account",t)},expression:"registryForm.account"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{type:"password"},model:{value:e.registryForm.password,callback:function(t){e.$set(e.registryForm,"password",t)},expression:"registryForm.password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"确认密码",prop:"checkPass"}},[a("el-input",{attrs:{type:"password"},model:{value:e.registryForm.checkPass,callback:function(t){e.$set(e.registryForm,"checkPass",t)},expression:"registryForm.checkPass"}})],1),e._v(" "),a("el-row",[a("el-button",{attrs:{type:"primary"},on:{click:e.handleRegistry}},[e._v("立即注册")]),e._v(" "),a("el-button",{on:{click:e.goLogin}},[e._v("返回登录")])],1)],1)},staticRenderFns:[]},N={name:"Login",computed:{state:function(){return this.$route.params.state}},components:{LoginForm:a("VU/8")(S,j,!1,function(e){a("lOhb")},null,null).exports,RegistryForm:a("VU/8")(z,A,!1,null,null,null).exports}},X={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"login"},[t("div",{staticClass:"login-container"},["login"===this.state?t("login-form"):t("registry-form")],1)])},staticRenderFns:[]};var B=a("VU/8")(N,X,!1,function(e){a("+Dab")},null,null).exports,G={name:"Home",data:function(){return{visible:!1,tableHeight:null,tableData:[],addForm:{name:"",price:null,sale_method:"",sale_date:"",series:"",type:"METALBUILD"},rules:{name:[{required:!0,message:"请输入名称",trigger:"blur"}],price:[{required:!0,message:"请输入价格",trigger:"blur"},{type:"number",message:"请输入数字",trigger:"blur"}],sale_method:[{required:!0,message:"请输入发售方式",trigger:"blur"}],sale_date:[{required:!0,message:"请输入发售日期",trigger:"blur"}],series:[{required:!0,message:"请输入系列",trigger:"blur"}]}}},methods:{initData:function(){var e=this;U({method:"get",url:"/api/getList"}).then(function(t){1e3===t.status&&t.success&&(e.tableData=t.data)})},setTableHeight:function(){var e=document.body.clientHeight;this.tableHeight=e-50-20-42},handleDialogClose:function(){this.$refs.addForm.resetFields()},handleAddFormSubmit:function(){var e=this;this.$refs.addForm.validate(function(t){if(!t)return!1;U({method:"post",url:"/api/addList",data:J()({},e.addForm)}).then(function(t){1e3===t.status&&t.success&&(e.visible=!1,e.$refs.addForm.resetFields(),e.initData())})})}},created:function(){this.setTableHeight(),this.initData()}},W={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"home"},[a("div",{staticClass:"home-container"},[a("el-row",{staticClass:"mb10"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"small"},on:{click:function(t){e.visible=!0}}},[e._v("添加")])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,height:e.tableHeight}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"名称",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"price",label:"价格",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v("¥ "+e._s(t.row.price))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"sale_method",label:"发售方式",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sale_date",label:"发售日期",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"series",label:"系列"}})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"添加数据",visible:e.visible,width:"500px"},on:{"update:visible":function(t){e.visible=t},close:e.handleDialogClose}},[a("el-form",{ref:"addForm",attrs:{model:e.addForm,rules:e.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{prop:"name",label:"名称"}},[a("el-input",{model:{value:e.addForm.name,callback:function(t){e.$set(e.addForm,"name",t)},expression:"addForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"price",label:"价格"}},[a("el-input",{model:{value:e.addForm.price,callback:function(t){e.$set(e.addForm,"price",e._n(t))},expression:"addForm.price"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"sale_method",label:"发售方式"}},[a("el-input",{model:{value:e.addForm.sale_method,callback:function(t){e.$set(e.addForm,"sale_method",t)},expression:"addForm.sale_method"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"sale_date",label:"发售日期"}},[a("el-date-picker",{attrs:{type:"month",placeholder:"选择日期",editable:!1,"value-format":"yyyy-MM"},model:{value:e.addForm.sale_date,callback:function(t){e.$set(e.addForm,"sale_date",t)},expression:"addForm.sale_date"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"series",label:"系列"}},[a("el-input",{model:{value:e.addForm.series,callback:function(t){e.$set(e.addForm,"series",t)},expression:"addForm.series"}})],1)],1),e._v(" "),a("el-row",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.handleAddFormSubmit}},[e._v("确定")]),e._v(" "),a("el-button",{attrs:{size:"medium"},on:{click:function(t){e.visible=!1}}},[e._v("取消")])],1)],1)],1)},staticRenderFns:[]};var Y=a("VU/8")(G,W,!1,function(e){a("/G+w")},null,null).exports;k.default.use($.a);var Q=new $.a({mode:"history",routes:[{path:"/",name:"index",component:V,redirect:"/home",children:[{path:"home",name:"home",component:Y}]},{path:"/loginRegistry/:state",name:"loginRegistry",component:B},{path:"*",name:"404",component:E}]});k.default.use(w.a),k.default.use(y.a),k.default.use(_.a),k.default.use(h.a),k.default.use(f.a),k.default.use(m.a),k.default.use(u.a),k.default.use(l.a),k.default.use(o.a),k.default.use(n.a),k.default.config.productionTip=!1,new k.default({el:"#app",router:Q,render:function(e){return e(x)}})},"X+ky":function(e,t){},Yq4J:function(e,t){},cDSy:function(e,t){},cwe7:function(e,t){},d7TW:function(e,t){},isE6:function(e,t){},isgN:function(e,t){},lOhb:function(e,t){},qunJ:function(e,t){},rU7j:function(e,t){},vHEl:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.dad6c36c676a09570c57.js.map